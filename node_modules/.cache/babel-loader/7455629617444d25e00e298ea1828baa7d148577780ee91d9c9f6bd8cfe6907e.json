{"ast":null,"code":"import React, { useState, useRef, useEffect, useMemo } from 'react';\nimport { focusFirstFocusableNode } from '../../../../utilities/focus.js';\nimport { useIsTouchDevice } from '../../../../utilities/use-is-touch-device.js';\nimport { useI18n } from '../../../../utilities/i18n/hooks.js';\nimport { useFeatures } from '../../../../utilities/features/hooks.js';\nimport { Button } from '../../../Button/Button.js';\nimport { HorizontalStack } from '../../../HorizontalStack/HorizontalStack.js';\nimport { Modal } from '../../../Modal/Modal.js';\nimport { Form } from '../../../Form/Form.js';\nimport { FormLayout } from '../../../FormLayout/FormLayout.js';\nimport { TextField } from '../../../TextField/TextField.js';\nconst MAX_VIEW_NAME_LENGTH = 40;\nfunction UpdateButtons({\n  primaryAction,\n  cancelAction,\n  viewNames,\n  disabled\n}) {\n  const i18n = useI18n();\n  const [savedViewName, setSavedViewName] = useState('');\n  const [savedViewModalOpen, setSavedViewModalOpen] = useState(false);\n  const container = useRef(null);\n  const isTouchDevice = useIsTouchDevice();\n  const {\n    polarisSummerEditions2023: se23\n  } = useFeatures();\n  useEffect(() => {\n    if (!container.current || isTouchDevice) return;\n    if (savedViewModalOpen) {\n      focusFirstFocusableNode(container.current);\n    }\n  }, [savedViewModalOpen, isTouchDevice]);\n  async function handleClickSaveButton() {\n    if (primaryAction?.type === 'save-as') {\n      handleOpenModal();\n    } else {\n      await primaryAction?.onAction('');\n    }\n  }\n  function handleOpenModal() {\n    setSavedViewModalOpen(true);\n  }\n  function handleCloseModal() {\n    setSavedViewModalOpen(false);\n  }\n  function handleChange(value) {\n    setSavedViewName(value);\n  }\n  async function handlePrimaryAction() {\n    if (isPrimaryActionDisabled) return;\n    await primaryAction?.onAction(savedViewName);\n    handleCloseModal();\n  }\n  const buttonText = useMemo(() => {\n    switch (primaryAction?.type) {\n      case 'save':\n        return i18n.translate('Polaris.IndexFilters.UpdateButtons.save');\n      case 'save-as':\n      default:\n        return i18n.translate('Polaris.IndexFilters.UpdateButtons.saveAs');\n    }\n  }, [primaryAction?.type, i18n]);\n  const saveButton = /*#__PURE__*/React.createElement(Button, {\n    size: \"micro\",\n    primary: !se23 ? true : undefined,\n    plain: !se23 ? true : undefined,\n    onClick: handleClickSaveButton,\n    disabled: primaryAction?.disabled || disabled\n  }, buttonText);\n  const hasSameNameError = viewNames.some(name => name.trim().toLowerCase() === savedViewName.trim().toLowerCase());\n  const isPrimaryActionDisabled = hasSameNameError || !savedViewName || primaryAction?.loading || savedViewName.length > MAX_VIEW_NAME_LENGTH;\n  const cancelButtonMarkup = /*#__PURE__*/React.createElement(Button, {\n    plain: true,\n    primary: se23 ? true : undefined,\n    size: \"micro\",\n    onClick: cancelAction.onAction,\n    disabled: disabled\n  }, i18n.translate('Polaris.IndexFilters.UpdateButtons.cancel'));\n  if (!primaryAction) {\n    return cancelButtonMarkup;\n  }\n  return /*#__PURE__*/React.createElement(HorizontalStack, {\n    align: \"start\",\n    blockAlign: \"center\",\n    gap: se23 ? '100' : '200'\n  }, cancelButtonMarkup, primaryAction.type === 'save-as' ? /*#__PURE__*/React.createElement(Modal, {\n    activator: /*#__PURE__*/React.createElement(HorizontalStack, null, saveButton),\n    open: savedViewModalOpen,\n    title: i18n.translate('Polaris.IndexFilters.UpdateButtons.modal.title'),\n    onClose: handleCloseModal,\n    primaryAction: {\n      onAction: handlePrimaryAction,\n      content: i18n.translate('Polaris.IndexFilters.UpdateButtons.modal.save'),\n      disabled: isPrimaryActionDisabled\n    },\n    secondaryActions: [{\n      onAction: handleCloseModal,\n      content: i18n.translate('Polaris.IndexFilters.UpdateButtons.modal.cancel')\n    }]\n  }, /*#__PURE__*/React.createElement(Modal.Section, null, /*#__PURE__*/React.createElement(Form, {\n    onSubmit: handlePrimaryAction\n  }, /*#__PURE__*/React.createElement(FormLayout, null, /*#__PURE__*/React.createElement(\"div\", {\n    ref: container\n  }, /*#__PURE__*/React.createElement(TextField, {\n    label: i18n.translate('Polaris.IndexFilters.UpdateButtons.modal.label'),\n    value: savedViewName,\n    onChange: handleChange,\n    autoComplete: \"off\",\n    maxLength: MAX_VIEW_NAME_LENGTH,\n    showCharacterCount: true,\n    error: hasSameNameError ? i18n.translate('Polaris.IndexFilters.UpdateButtons.modal.sameName', {\n      name: savedViewName\n    }) : undefined\n  })))))) : saveButton);\n}\nexport { UpdateButtons };","map":{"version":3,"names":["React","useState","useRef","useEffect","useMemo","focusFirstFocusableNode","useIsTouchDevice","useI18n","useFeatures","Button","HorizontalStack","Modal","Form","FormLayout","TextField","MAX_VIEW_NAME_LENGTH","UpdateButtons","primaryAction","cancelAction","viewNames","disabled","i18n","savedViewName","setSavedViewName","savedViewModalOpen","setSavedViewModalOpen","container","isTouchDevice","polarisSummerEditions2023","se23","current","handleClickSaveButton","type","handleOpenModal","onAction","handleCloseModal","handleChange","value","handlePrimaryAction","isPrimaryActionDisabled","buttonText","translate","saveButton","createElement","size","primary","undefined","plain","onClick","hasSameNameError","some","name","trim","toLowerCase","loading","length","cancelButtonMarkup","align","blockAlign","gap","activator","open","title","onClose","content","secondaryActions","Section","onSubmit","ref","label","onChange","autoComplete","maxLength","showCharacterCount","error"],"sources":["/Users/nick/Documents/app info front ui/node_modules/@shopify/polaris/build/esm/components/IndexFilters/components/UpdateButtons/UpdateButtons.js"],"sourcesContent":["import React, { useState, useRef, useEffect, useMemo } from 'react';\nimport { focusFirstFocusableNode } from '../../../../utilities/focus.js';\nimport { useIsTouchDevice } from '../../../../utilities/use-is-touch-device.js';\nimport { useI18n } from '../../../../utilities/i18n/hooks.js';\nimport { useFeatures } from '../../../../utilities/features/hooks.js';\nimport { Button } from '../../../Button/Button.js';\nimport { HorizontalStack } from '../../../HorizontalStack/HorizontalStack.js';\nimport { Modal } from '../../../Modal/Modal.js';\nimport { Form } from '../../../Form/Form.js';\nimport { FormLayout } from '../../../FormLayout/FormLayout.js';\nimport { TextField } from '../../../TextField/TextField.js';\n\nconst MAX_VIEW_NAME_LENGTH = 40;\nfunction UpdateButtons({\n  primaryAction,\n  cancelAction,\n  viewNames,\n  disabled\n}) {\n  const i18n = useI18n();\n  const [savedViewName, setSavedViewName] = useState('');\n  const [savedViewModalOpen, setSavedViewModalOpen] = useState(false);\n  const container = useRef(null);\n  const isTouchDevice = useIsTouchDevice();\n  const {\n    polarisSummerEditions2023: se23\n  } = useFeatures();\n  useEffect(() => {\n    if (!container.current || isTouchDevice) return;\n    if (savedViewModalOpen) {\n      focusFirstFocusableNode(container.current);\n    }\n  }, [savedViewModalOpen, isTouchDevice]);\n  async function handleClickSaveButton() {\n    if (primaryAction?.type === 'save-as') {\n      handleOpenModal();\n    } else {\n      await primaryAction?.onAction('');\n    }\n  }\n  function handleOpenModal() {\n    setSavedViewModalOpen(true);\n  }\n  function handleCloseModal() {\n    setSavedViewModalOpen(false);\n  }\n  function handleChange(value) {\n    setSavedViewName(value);\n  }\n  async function handlePrimaryAction() {\n    if (isPrimaryActionDisabled) return;\n    await primaryAction?.onAction(savedViewName);\n    handleCloseModal();\n  }\n  const buttonText = useMemo(() => {\n    switch (primaryAction?.type) {\n      case 'save':\n        return i18n.translate('Polaris.IndexFilters.UpdateButtons.save');\n      case 'save-as':\n      default:\n        return i18n.translate('Polaris.IndexFilters.UpdateButtons.saveAs');\n    }\n  }, [primaryAction?.type, i18n]);\n  const saveButton = /*#__PURE__*/React.createElement(Button, {\n    size: \"micro\",\n    primary: !se23 ? true : undefined,\n    plain: !se23 ? true : undefined,\n    onClick: handleClickSaveButton,\n    disabled: primaryAction?.disabled || disabled\n  }, buttonText);\n  const hasSameNameError = viewNames.some(name => name.trim().toLowerCase() === savedViewName.trim().toLowerCase());\n  const isPrimaryActionDisabled = hasSameNameError || !savedViewName || primaryAction?.loading || savedViewName.length > MAX_VIEW_NAME_LENGTH;\n  const cancelButtonMarkup = /*#__PURE__*/React.createElement(Button, {\n    plain: true,\n    primary: se23 ? true : undefined,\n    size: \"micro\",\n    onClick: cancelAction.onAction,\n    disabled: disabled\n  }, i18n.translate('Polaris.IndexFilters.UpdateButtons.cancel'));\n  if (!primaryAction) {\n    return cancelButtonMarkup;\n  }\n  return /*#__PURE__*/React.createElement(HorizontalStack, {\n    align: \"start\",\n    blockAlign: \"center\",\n    gap: se23 ? '100' : '200'\n  }, cancelButtonMarkup, primaryAction.type === 'save-as' ? /*#__PURE__*/React.createElement(Modal, {\n    activator: /*#__PURE__*/React.createElement(HorizontalStack, null, saveButton),\n    open: savedViewModalOpen,\n    title: i18n.translate('Polaris.IndexFilters.UpdateButtons.modal.title'),\n    onClose: handleCloseModal,\n    primaryAction: {\n      onAction: handlePrimaryAction,\n      content: i18n.translate('Polaris.IndexFilters.UpdateButtons.modal.save'),\n      disabled: isPrimaryActionDisabled\n    },\n    secondaryActions: [{\n      onAction: handleCloseModal,\n      content: i18n.translate('Polaris.IndexFilters.UpdateButtons.modal.cancel')\n    }]\n  }, /*#__PURE__*/React.createElement(Modal.Section, null, /*#__PURE__*/React.createElement(Form, {\n    onSubmit: handlePrimaryAction\n  }, /*#__PURE__*/React.createElement(FormLayout, null, /*#__PURE__*/React.createElement(\"div\", {\n    ref: container\n  }, /*#__PURE__*/React.createElement(TextField, {\n    label: i18n.translate('Polaris.IndexFilters.UpdateButtons.modal.label'),\n    value: savedViewName,\n    onChange: handleChange,\n    autoComplete: \"off\",\n    maxLength: MAX_VIEW_NAME_LENGTH,\n    showCharacterCount: true,\n    error: hasSameNameError ? i18n.translate('Polaris.IndexFilters.UpdateButtons.modal.sameName', {\n      name: savedViewName\n    }) : undefined\n  })))))) : saveButton);\n}\n\nexport { UpdateButtons };\n"],"mappings":"AAAA,OAAOA,KAAK,IAAIC,QAAQ,EAAEC,MAAM,EAAEC,SAAS,EAAEC,OAAO,QAAQ,OAAO;AACnE,SAASC,uBAAuB,QAAQ,gCAAgC;AACxE,SAASC,gBAAgB,QAAQ,8CAA8C;AAC/E,SAASC,OAAO,QAAQ,qCAAqC;AAC7D,SAASC,WAAW,QAAQ,yCAAyC;AACrE,SAASC,MAAM,QAAQ,2BAA2B;AAClD,SAASC,eAAe,QAAQ,6CAA6C;AAC7E,SAASC,KAAK,QAAQ,yBAAyB;AAC/C,SAASC,IAAI,QAAQ,uBAAuB;AAC5C,SAASC,UAAU,QAAQ,mCAAmC;AAC9D,SAASC,SAAS,QAAQ,iCAAiC;AAE3D,MAAMC,oBAAoB,GAAG,EAAE;AAC/B,SAASC,aAAaA,CAAC;EACrBC,aAAa;EACbC,YAAY;EACZC,SAAS;EACTC;AACF,CAAC,EAAE;EACD,MAAMC,IAAI,GAAGd,OAAO,CAAC,CAAC;EACtB,MAAM,CAACe,aAAa,EAAEC,gBAAgB,CAAC,GAAGtB,QAAQ,CAAC,EAAE,CAAC;EACtD,MAAM,CAACuB,kBAAkB,EAAEC,qBAAqB,CAAC,GAAGxB,QAAQ,CAAC,KAAK,CAAC;EACnE,MAAMyB,SAAS,GAAGxB,MAAM,CAAC,IAAI,CAAC;EAC9B,MAAMyB,aAAa,GAAGrB,gBAAgB,CAAC,CAAC;EACxC,MAAM;IACJsB,yBAAyB,EAAEC;EAC7B,CAAC,GAAGrB,WAAW,CAAC,CAAC;EACjBL,SAAS,CAAC,MAAM;IACd,IAAI,CAACuB,SAAS,CAACI,OAAO,IAAIH,aAAa,EAAE;IACzC,IAAIH,kBAAkB,EAAE;MACtBnB,uBAAuB,CAACqB,SAAS,CAACI,OAAO,CAAC;IAC5C;EACF,CAAC,EAAE,CAACN,kBAAkB,EAAEG,aAAa,CAAC,CAAC;EACvC,eAAeI,qBAAqBA,CAAA,EAAG;IACrC,IAAId,aAAa,EAAEe,IAAI,KAAK,SAAS,EAAE;MACrCC,eAAe,CAAC,CAAC;IACnB,CAAC,MAAM;MACL,MAAMhB,aAAa,EAAEiB,QAAQ,CAAC,EAAE,CAAC;IACnC;EACF;EACA,SAASD,eAAeA,CAAA,EAAG;IACzBR,qBAAqB,CAAC,IAAI,CAAC;EAC7B;EACA,SAASU,gBAAgBA,CAAA,EAAG;IAC1BV,qBAAqB,CAAC,KAAK,CAAC;EAC9B;EACA,SAASW,YAAYA,CAACC,KAAK,EAAE;IAC3Bd,gBAAgB,CAACc,KAAK,CAAC;EACzB;EACA,eAAeC,mBAAmBA,CAAA,EAAG;IACnC,IAAIC,uBAAuB,EAAE;IAC7B,MAAMtB,aAAa,EAAEiB,QAAQ,CAACZ,aAAa,CAAC;IAC5Ca,gBAAgB,CAAC,CAAC;EACpB;EACA,MAAMK,UAAU,GAAGpC,OAAO,CAAC,MAAM;IAC/B,QAAQa,aAAa,EAAEe,IAAI;MACzB,KAAK,MAAM;QACT,OAAOX,IAAI,CAACoB,SAAS,CAAC,yCAAyC,CAAC;MAClE,KAAK,SAAS;MACd;QACE,OAAOpB,IAAI,CAACoB,SAAS,CAAC,2CAA2C,CAAC;IACtE;EACF,CAAC,EAAE,CAACxB,aAAa,EAAEe,IAAI,EAAEX,IAAI,CAAC,CAAC;EAC/B,MAAMqB,UAAU,GAAG,aAAa1C,KAAK,CAAC2C,aAAa,CAAClC,MAAM,EAAE;IAC1DmC,IAAI,EAAE,OAAO;IACbC,OAAO,EAAE,CAAChB,IAAI,GAAG,IAAI,GAAGiB,SAAS;IACjCC,KAAK,EAAE,CAAClB,IAAI,GAAG,IAAI,GAAGiB,SAAS;IAC/BE,OAAO,EAAEjB,qBAAqB;IAC9BX,QAAQ,EAAEH,aAAa,EAAEG,QAAQ,IAAIA;EACvC,CAAC,EAAEoB,UAAU,CAAC;EACd,MAAMS,gBAAgB,GAAG9B,SAAS,CAAC+B,IAAI,CAACC,IAAI,IAAIA,IAAI,CAACC,IAAI,CAAC,CAAC,CAACC,WAAW,CAAC,CAAC,KAAK/B,aAAa,CAAC8B,IAAI,CAAC,CAAC,CAACC,WAAW,CAAC,CAAC,CAAC;EACjH,MAAMd,uBAAuB,GAAGU,gBAAgB,IAAI,CAAC3B,aAAa,IAAIL,aAAa,EAAEqC,OAAO,IAAIhC,aAAa,CAACiC,MAAM,GAAGxC,oBAAoB;EAC3I,MAAMyC,kBAAkB,GAAG,aAAaxD,KAAK,CAAC2C,aAAa,CAAClC,MAAM,EAAE;IAClEsC,KAAK,EAAE,IAAI;IACXF,OAAO,EAAEhB,IAAI,GAAG,IAAI,GAAGiB,SAAS;IAChCF,IAAI,EAAE,OAAO;IACbI,OAAO,EAAE9B,YAAY,CAACgB,QAAQ;IAC9Bd,QAAQ,EAAEA;EACZ,CAAC,EAAEC,IAAI,CAACoB,SAAS,CAAC,2CAA2C,CAAC,CAAC;EAC/D,IAAI,CAACxB,aAAa,EAAE;IAClB,OAAOuC,kBAAkB;EAC3B;EACA,OAAO,aAAaxD,KAAK,CAAC2C,aAAa,CAACjC,eAAe,EAAE;IACvD+C,KAAK,EAAE,OAAO;IACdC,UAAU,EAAE,QAAQ;IACpBC,GAAG,EAAE9B,IAAI,GAAG,KAAK,GAAG;EACtB,CAAC,EAAE2B,kBAAkB,EAAEvC,aAAa,CAACe,IAAI,KAAK,SAAS,GAAG,aAAahC,KAAK,CAAC2C,aAAa,CAAChC,KAAK,EAAE;IAChGiD,SAAS,EAAE,aAAa5D,KAAK,CAAC2C,aAAa,CAACjC,eAAe,EAAE,IAAI,EAAEgC,UAAU,CAAC;IAC9EmB,IAAI,EAAErC,kBAAkB;IACxBsC,KAAK,EAAEzC,IAAI,CAACoB,SAAS,CAAC,gDAAgD,CAAC;IACvEsB,OAAO,EAAE5B,gBAAgB;IACzBlB,aAAa,EAAE;MACbiB,QAAQ,EAAEI,mBAAmB;MAC7B0B,OAAO,EAAE3C,IAAI,CAACoB,SAAS,CAAC,+CAA+C,CAAC;MACxErB,QAAQ,EAAEmB;IACZ,CAAC;IACD0B,gBAAgB,EAAE,CAAC;MACjB/B,QAAQ,EAAEC,gBAAgB;MAC1B6B,OAAO,EAAE3C,IAAI,CAACoB,SAAS,CAAC,iDAAiD;IAC3E,CAAC;EACH,CAAC,EAAE,aAAazC,KAAK,CAAC2C,aAAa,CAAChC,KAAK,CAACuD,OAAO,EAAE,IAAI,EAAE,aAAalE,KAAK,CAAC2C,aAAa,CAAC/B,IAAI,EAAE;IAC9FuD,QAAQ,EAAE7B;EACZ,CAAC,EAAE,aAAatC,KAAK,CAAC2C,aAAa,CAAC9B,UAAU,EAAE,IAAI,EAAE,aAAab,KAAK,CAAC2C,aAAa,CAAC,KAAK,EAAE;IAC5FyB,GAAG,EAAE1C;EACP,CAAC,EAAE,aAAa1B,KAAK,CAAC2C,aAAa,CAAC7B,SAAS,EAAE;IAC7CuD,KAAK,EAAEhD,IAAI,CAACoB,SAAS,CAAC,gDAAgD,CAAC;IACvEJ,KAAK,EAAEf,aAAa;IACpBgD,QAAQ,EAAElC,YAAY;IACtBmC,YAAY,EAAE,KAAK;IACnBC,SAAS,EAAEzD,oBAAoB;IAC/B0D,kBAAkB,EAAE,IAAI;IACxBC,KAAK,EAAEzB,gBAAgB,GAAG5B,IAAI,CAACoB,SAAS,CAAC,mDAAmD,EAAE;MAC5FU,IAAI,EAAE7B;IACR,CAAC,CAAC,GAAGwB;EACP,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,GAAGJ,UAAU,CAAC;AACvB;AAEA,SAAS1B,aAAa","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}